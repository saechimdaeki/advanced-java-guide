## 멀티프로세싱 vs. 멀티태스킹

멀티프로세싱은 하드웨어 장비의 관점이고, 멀티태스킹은 운영체제 소프트웨어의 관점이다.

## 멀티프로세싱

여러 CPU(여러 CPU 코어)를 사용하여 동시에 여러 작업을 수행하는 것을 의미한다. 하드웨어 기반으로 성능을 향상시킨다.

예: 다중 코어 프로세서를 사용하는 현대 컴퓨터 시스템

## 멀티태스킹

단일 CPU(단일 CPU 코어)가 여러 작업을 동시에 수행하는 것처럼 보이게 하는 것을 의미한다. 

소프트웨어 기반으로 CPU 시간을 분할하여 각 작업에 할당한다.
예: 현대 운영 체제에서 여러 애플리케이션이 동시에 실행되는 환경

![image](https://github.com/user-attachments/assets/d69bf23e-d4ba-4ad5-833c-e00e269eee42)

## 프로세스

- 프로그램은 실제 실행하기 전까지는 단순한 파일에 불과하다.
- 프로그램을 실행하면 프로세스가 만들어지고 프로그램이 실행된다.
- 이렇게 운영체제 안에서 실행중인 프로그램을 프로세스라 한다.
- 프로세스는 실행 중인 프로그램의 인스턴스이다.
- 자바 언어로 비유를 하자면 클래스는 프로그램이고, 인스턴스는 프로세스이다.

### 프로세스의 메모리 구성

- 코드 섹션 실행할 프로그램의 코드가 저장되는 부분
- 데이터 섹션 전역 변수 및 정적 변수가 저장되는 부분(그림에서 기타에 포함)
- 힙 (Heap): 동적으로 할당되는 메모리 영역
- 스택 (Stack): 메서드(함수) 호출 시 생성되는 지역 변수와 반환 주소가 저장되는 영역(스레드에 포함)

## 스레드 (Thread)
### 프로세스는 하나 이상의 스레드를 반드시 포함한다

- 스레드는 프로세스 내에서 실행되는 작업의 단위이다. 한 프로세스 내에서 여러 스레드가 존재할 수 있으며, 
- 이들은 프 로세스가 제공하는 동일한 메모리 공간을 공유한다. 스레드는 프로세스보다 단순하므로 생성 및 관리가 단순하고 가볍 다.
### 메모리 구성
- 공유 메모리: 같은 프로세스의 코드 섹션, 데이터 섹션, 힙(메모리)은 프로세스 안의 모든 스레드가 공유한다. 
- 개별 스택: 각 스레드는 자신의 스택을 갖고 있다.

## 프로세스, 스레드와 스케줄링 - 정리 

### 멀티태스킹과 스케줄링
멀티태스킹이란 동시에 여러 작업을 수행하는 것을 말한다. 이를 위해 운영체제는 스케줄링이라는 기법을 사용한 다. 스케줄링은 CPU 시간을 여러 작업에 나누어 배분하는 방법이다.
### 프로세스와 스레드
- 프로세스는 실행 중인 프로그램의 인스턴스이다. 각 프로세스는 독립적인 메모리 공간을 가지며, 운영체제에서 독 립된 실행 단위로 취급된다.
- 스레드는 프로세스 내에서 실행되는 작은 단위이다. 여러 스레드는 하나의 프로세스 내에서 자원을 공유하며, 프 로세스의 코드, 데이터, 시스템 자원등을 공유한다. 

    실제로 CPU에 의해 실행되는 단위는 스레드이다.
### 프로세스의 역할
- 프로세스는 실행 환경을 제공한다. 여기에는 메모리 공간, 파일 핸들, 시스템 자원(네트워크 연결) 등이 포함된다. 이는 프로세스가 컨테이너 역할을 한다는 의미이다.
- 프로세스 자체는 운영체제의 스케줄러에 의해 직접 실행되지 않으며, 프로세스 내의 스레드가 실행된다. 
    
    참고로 1 개의 프로세스 안에 하나의 스레드만 실행되는 경우도 있고, 1개의 프로세스 안에 여러 스레드가 실행되는 경우도 있다.

### 사용자 스레드
- 프로그램의 주요 작업을 수행
- 작업이 완료될 때까지 실행
- 모든 user 스레드가 종료되면 JVM도 종료

### 데몬 스레드
- 백그라운드에서 보조적인 작업을 수행
- 모든 user 스레드가 종료되면 데몬 스레드는 자동으로 종료

JVM은 데몬 스레드의 실행 완료를 기다리지 않고 종료된다. 데몬 스레드가 아닌 모든 스레드가 종료되면, 자바 프로그램도 종료
